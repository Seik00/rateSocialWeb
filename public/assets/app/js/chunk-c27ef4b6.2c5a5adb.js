(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c27ef4b6"],{"25f0":function(t,e,s){"use strict";var a=s("6eeb"),o=s("825a"),i=s("d039"),r=s("ad6d"),l="toString",n=RegExp.prototype,c=n[l],d=i((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),u=c.name!=l;(d||u)&&a(RegExp.prototype,l,(function(){var t=o(this),e=String(t.source),s=t.flags,a=String(void 0===s&&t instanceof RegExp&&!("flags"in n)?r.call(t):s);return"/"+e+"/"+a}),{unsafe:!0})},9565:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div")},o=[],i={methods:{makeToast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;this.$bvToast.toast(e,{variant:t,solid:!0})}},watch:{testProp:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"success",e=arguments.length>1?arguments[1]:void 0;this.$bvToast.toast(e,{variant:t,solid:!0})}}},r=i,l=s("2877"),n=Object(l["a"])(r,a,o,!1,null,null,null);e["a"]=n.exports},ad6d:function(t,e,s){"use strict";var a=s("825a");t.exports=function(){var t=a(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},b5d3:function(t,e,s){},c8ee:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main-content"},[s("breadcumb",{attrs:{page:t.$t("system_config"),folder:t.$t("system_setting")}}),s("b-card",{attrs:{title:" "}},[s("b-form",{staticClass:"mx-5",on:{submit:function(e){return e.preventDefault(),t.saveConfig(e)}}},[t._l(t.rows,(function(e){return s("div",{key:e.id,staticClass:"form-group row justify-content-center"},[s("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:e.global_key}},[t._v(" "+t._s(t.$t(e.global_key))+" ")]),"BONUS_SWITCH"==e.global_key?s("div",{staticClass:"col-sm-6"},[s("div",{staticClass:"col-sm-10 py-2"},[s("label",{staticClass:"switch switch-primary mr-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.dataset[e.global_key],expression:"dataset[item.global_key]"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.dataset[e.global_key])?t._i(t.dataset[e.global_key],null)>-1:t.dataset[e.global_key]},on:{change:function(s){var a=t.dataset[e.global_key],o=s.target,i=!!o.checked;if(Array.isArray(a)){var r=null,l=t._i(a,r);o.checked?l<0&&t.$set(t.dataset,e.global_key,a.concat([r])):l>-1&&t.$set(t.dataset,e.global_key,a.slice(0,l).concat(a.slice(l+1)))}else t.$set(t.dataset,e.global_key,i)}}}),s("span",{staticClass:"slider"})])])]):"SITE_ON"==e.global_key?s("div",{staticClass:"col-sm-6"},[s("div",{staticClass:"col-sm-10 py-2"},[s("label",{staticClass:"switch switch-primary mr-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.dataset[e.global_key],expression:"dataset[item.global_key]"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.dataset[e.global_key])?t._i(t.dataset[e.global_key],null)>-1:t.dataset[e.global_key]},on:{change:function(s){var a=t.dataset[e.global_key],o=s.target,i=!!o.checked;if(Array.isArray(a)){var r=null,l=t._i(a,r);o.checked?l<0&&t.$set(t.dataset,e.global_key,a.concat([r])):l>-1&&t.$set(t.dataset,e.global_key,a.slice(0,l).concat(a.slice(l+1)))}else t.$set(t.dataset,e.global_key,i)}}}),s("span",{staticClass:"slider"})])])]):"MINING_START"==e.global_key?s("div",{staticClass:"col-sm-6"},[s("div",{},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.dataset[e.global_key],expression:"dataset[item.global_key]"}],staticClass:"form-control",attrs:{type:"time"},domProps:{value:t.dataset[e.global_key]},on:{input:function(s){s.target.composing||t.$set(t.dataset,e.global_key,s.target.value)}}}),s("span",[t._v(t._s(t.$t("enter_start")))])])])]):"MINING_END"==e.global_key?s("div",{staticClass:"col-sm-6"},[s("div",{},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.dataset[e.global_key],expression:"dataset[item.global_key]"}],staticClass:"form-control",attrs:{type:"time"},domProps:{value:t.dataset[e.global_key]},on:{input:function(s){s.target.composing||t.$set(t.dataset,e.global_key,s.target.value)}}}),s("span",[t._v(t._s(t.$t("enter_end")))])])])]):"DEFAULT_SETTINGS"==e.global_key?s("div",{staticClass:"col-sm-6"},[s("div",{staticClass:"col-sm-10 py-2"},[s("label",[s("button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:t.$t("edit"),expression:"$t('edit')",modifiers:{hover:!0,top:!0}}],staticClass:"btn btn-default btn-edit",attrs:{type:"button"},on:{click:function(s){return t.showSettings(t.dataset[e.global_key])}}},[s("i",{staticClass:"fa fa-pencil"},[t._v(" Setting")])])])])]):s("div",{staticClass:"col-sm-6"},[s("b-form-input",{staticClass:"form-control",attrs:{type:"text",id:e.global_key,required:""},model:{value:t.dataset[e.global_key],callback:function(s){t.$set(t.dataset,e.global_key,s)},expression:"dataset[item.global_key]"}})],1)])})),s("div",{staticClass:"form-group row justify-content-center"},[s("div",{staticClass:"col-sm-9"},[s("div",{staticClass:"mt-4 float-right"},[s("b-button",{staticClass:"m-1",attrs:{type:"submit",variant:"primary"}},[t._v(t._s(t.$t("submit")))])],1)])])],2)],1),s("b-modal",{attrs:{id:"modal-1",size:"xl",centered:"",title:t.$t("edit"),"hide-footer":!0}},[s("b-tabs",{attrs:{pills:""}},[s("b-form",{on:{submit:function(e){return e.preventDefault(),t.saveConfig(e)}}},[t._l(t.form.setting,(function(e,a){return s("div",{key:e.id,staticClass:"form-group row"},[s("label",{staticClass:"col-sm-1 col-form-label"},[t._v(t._s(t.$t("order")+"No"+(a+1)))]),s("div",{staticClass:"col-sm-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.setting[a]["order"],expression:"form.setting[index]['order']"}],staticClass:"form-control",attrs:{type:"number",min:"1",step:"0.01",required:""},domProps:{value:t.form.setting[a]["order"]},on:{input:function(e){e.target.composing||t.$set(t.form.setting[a],"order",e.target.value)}}})]),s("label",{staticClass:"col-sm-1 col-form-label"},[t._v(t._s(t.$t("price")+"(USD) No"+(a+1)))]),s("div",{staticClass:"col-sm-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.setting[a]["price"],expression:"form.setting[index]['price']"}],staticClass:"form-control",attrs:{type:"number",min:"0",step:"0.01",required:""},domProps:{value:t.form.setting[a]["price"]},on:{input:function(e){e.target.composing||t.$set(t.form.setting[a],"price",e.target.value)}}})]),s("label",{staticClass:"col-sm-1 col-form-label"},[t._v(t._s(t.$t("profit")+"(%) No"+(a+1)))]),s("div",{staticClass:"col-sm-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.setting[a]["profit_rate"],expression:"form.setting[index]['profit_rate']"}],staticClass:"form-control",attrs:{type:"number",min:"0",step:"0.01",required:""},domProps:{value:t.form.setting[a]["profit_rate"]},on:{input:function(e){e.target.composing||t.$set(t.form.setting[a],"profit_rate",e.target.value)}}})]),s("label",{staticClass:"col-sm-2 col-form-label"},[t._v(t._s(t.$t("products_price")+" No"+(a+1)))]),s("div",{staticClass:"col-sm-3"},[s("SearchModal",{attrs:{index:a,products:t.productOptions,id:t.form.setting[a]["product_id"]},on:{_productID:t.changeID}})],1)])})),s("div",{staticClass:"form-group row justify-content-end"},[s("div",{staticClass:"col-sm-12"},[s("div",{staticClass:"mt-4 float-right"},[s("b-button",{staticClass:"m-1",attrs:{type:"submit",variant:"primary"}},[t._v(t._s(t.$t("update")))])],1)])])],2)],1)],1),s("Dialog",{ref:"msg"})],1)},o=[],i=(s("a4d3"),s("e01a"),s("4160"),s("d3b7"),s("25f0"),s("159b"),s("06e0")),r=s("9565"),l=s("402a"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.productText,expression:"productText"}],staticClass:"form-control",attrs:{id:t.index,type:"text",readonly:""},domProps:{value:t.productText},on:{click:t.showModal,input:function(e){e.target.composing||(t.productText=e.target.value)}}}),s("b-modal",{attrs:{id:"modal-search"+t.index,size:"xl",centered:"",title:t.$t("products_price")+" No"+(t.index+1)},on:{ok:t.handleOk}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],staticClass:"form-control",attrs:{type:"number",min:"0",step:"0.01",placeholder:t.$t("inputPrice")},domProps:{value:t.price},on:{input:[function(e){e.target.composing||(t.price=e.target.value)},t.loadItems]}}),s("div",{staticClass:"mt-4",staticStyle:{height:"300px",position:"relative","overflow-y":"scroll"}},[t.isSearching||t.productList.length<=0?s("div",{staticStyle:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",height:"100%",width:"100%","z-index":"3",display:"flex","justify-content":"center","align-items":"center"}},[t.isSearching?s("div",{staticClass:"spinner spinner-primary m-2 text-50"}):t.productList.length<=0?s("div",[s("span",[t._v(t._s(t.$t("nodataInPrice")))])]):t._e()]):t._e(),s("b-list-group",t._l(t.productList,(function(e){return s("b-list-group-item",{key:e.id,attrs:{button:""},on:{click:function(s){return t.selectProduct(e)}}},[t._v(t._s("("+e.price+") "+e.name))])})),1)],1)])],1)},c=[],d=s("5530"),u=s("2f62"),p={props:["index","products","id"],computed:Object(d["a"])({},Object(u["c"])(["lang"]),{productText:function(){if(null!=this.id&&""!=this.id){for(var t="",e=0;e<this.products.length;e++)(this.products[e].value==this.productID||this.products[e].value==this.id)&&(t=this.products[e].text);return t}return null}}),data:function(){return{isSearching:!0,isClicked:!1,price:"",productList:[],productID:null,preProductID:null}},methods:{handleOk:function(){console.log("clicked");var t={};this.isClicked=!0,this.productID=this.preProductID,t["index"]=this.index,t["productID"]=this.productID,this.$emit("_productID",t)},selectProduct:function(t){this.preProductID=t.id},showModal:function(){this.isClicked=!1,this.$bvModal.show("modal-search"+this.index),this.loadItems()},loadItems:function(){this.productList=[];var t=Object(i["hb"])(this.price),e=this;this.isSearching=!0,t.then((function(t){e.productList=t.data.data.record,e.isSearching=!1})).catch((function(t){e.$refs.msg.makeToast("warning",e.$t(Object(l["b"])(t)))}))}},created:function(){}},m=p,g=s("2877"),f=Object(g["a"])(m,n,c,!1,null,null,null),v=f.exports,h={components:{Dialog:r["a"],SearchModal:v},data:function(){return{form:{setting:[]},setting:[],selectedId:null,title:"",dataset:{},isLoading:!1,canClear:!1,totalRecords:0,pageNumber:1,message:"",rows:[],productOptions:[],utc4Start:""}},props:["success"],methods:{showSettings:function(t){if(console.log(t),this.$bvModal.show("modal-1"),this.form.setting=[],console.log(JSON.parse(t)),null==t)for(var e=0;e<30;e++){var s={order:1,price:0,profit_rate:0,product_id:""};this.form.setting.push(s)}else this.form.setting=JSON.parse(t)},changeID:function(t){console.log("Event from child component emitted",t),this.form.setting[t.index]["product_id"]=t.productID,console.log(t.index,this.form.setting[t.index]["product_id"])},processDate:function(t){var e=new Date(t),s=e.getMinutes(),a=e.getHours();1==s.toString().length&&(s="0"+s),1==a.toString().length&&(a="0"+a);var o=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+a+":"+s;return o},onPageChange:function(t){this.pageNumber=t.currentPage,this.loadItems();var e=this.$el.querySelector("#table"),s=e.offsetTop;window.scrollTo(0,s)},onSearch:function(){this.pageNumber=1,this.loadItems()},onCancel:function(){this.canClear=!1,this.loadItems()},addFile:function(){console.log("hello")},saveConfig:function(){for(var t in this.dataset)"SITE_ON"==t||"BONUS_SWITCH"==t?this.dataset[t]?this.dataset[t]=1:this.dataset[t]=0:"DEFAULT_SETTINGS"==t?(this.dataset[t]=this.form.setting,this.$bvModal.hide("modal-1")):"MINING_START"==t?8!=this.dataset[t].length&&(this.dataset[t]=this.dataset[t]+":00".slice(0,8)):"MINING_END"==t&&8!=this.dataset[t].length&&(this.dataset[t]=this.dataset[t]+":00".slice(0,8));var e=JSON.stringify(this.dataset),s=Object(i["gb"])(e),a=this;s.then((function(t){0==t.data.error_code?(a.$refs.msg.makeToast("success",a.$t("successSubmit")),a.dataset={},a.rows=[],a.loadItems()):a.$refs.msg.makeToast("danger",a.$t(t.data.message))})).catch((function(t){a.$refs.msg.makeToast("warning",a.$t(Object(l["b"])(t)))}))},clearData:function(){this.canEdit=!1;var t=this;t.selectedId=null,t.title="",t.description="",t.type="1",t.language="",t.is_display=0,t.imgSrc=""},loadItems:function(){var t=Object(i["kb"])(),e=this;this.isLoading=!0,t.then((function(t){var s=t.data.data.record;e.rows=s,e.isLoading=!1,s.forEach((function(t){"BONUS_SWITCH"==t.global_key||"SITE_ON"==t.global_key?1==t.key_value?e.dataset[t.global_key]=!0:e.dataset[t.global_key]=!1:"DEFAULT_SETTINGS"==t.global_key?(e.form.setting=t.key_value,e.dataset[t.global_key]=e.form.setting,console.log("=============="),console.log(e.form.setting),console.log("==============")):e.dataset[t.global_key]=t.key_value})),e.productOptions=[];var a={value:null,text:""};e.productOptions.push(a),e.product=t.data.data.product;for(var o=0;o<e.product.length;o++){var i={};i["value"]=e.product[o].id,i["text"]="("+e.product[o].price+") "+e.product[o].name_en,e.productOptions.push(i)}})).catch((function(t){e.$refs.msg.makeToast("warning",e.$t(Object(l["b"])(t)))}))}},created:function(){this.loadItems()}},b=h,_=(s("ea16"),Object(g["a"])(b,a,o,!1,null,null,null));e["default"]=_.exports},e01a:function(t,e,s){"use strict";var a=s("23e7"),o=s("83ab"),i=s("da84"),r=s("5135"),l=s("861d"),n=s("9bf2").f,c=s("e893"),d=i.Symbol;if(o&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new d(t):void 0===t?d():d(t);return""===t&&(u[e]=!0),e};c(p,d);var m=p.prototype=d.prototype;m.constructor=p;var g=m.toString,f="Symbol(test)"==String(d("test")),v=/^Symbol\((.*)\)[^)]+$/;n(m,"description",{configurable:!0,get:function(){var t=l(this)?this.valueOf():this,e=g.call(t);if(r(u,t))return"";var s=f?e.slice(7,-1):e.replace(v,"$1");return""===s?void 0:s}}),a({global:!0,forced:!0},{Symbol:p})}},ea16:function(t,e,s){"use strict";var a=s("b5d3"),o=s.n(a);o.a}}]);
//# sourceMappingURL=chunk-c27ef4b6.2c5a5adb.js.map